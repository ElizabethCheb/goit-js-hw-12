{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\nlet currentPage = 1;\nconst apiKey = '41856148-e541297002e84807a45dae6d1';\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nconst loadMoreButton = document.getElementById('load-more-button');\n\nsearchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const searchQuery = searchInput.value.trim();\n  currentPage = 1; // Reset page when a new search is performed\n  fetchData(searchQuery, apiKey);\n});\n\nloadMoreButton.addEventListener('click', function () {\n  currentPage++;\n  const searchQuery = searchInput.value.trim();\n  fetchData(searchQuery, apiKey);\n});\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  lightbox = new SimpleLightbox('.my-gallery-class a', {});\n\n});\n\nasync function fetchData(searchQuery, apiKey) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=40`;\n\n  showLoadingIndicator();\n\n  try {\n    const data = await fetch(url).then(response => response.json());\n\n    hideLoadingIndicator();\n\n    if (data.hits.length === 0) {\n      displayNoResultsMessage();\n    } else {\n      displayImages(data.hits);\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    hideLoadingIndicator();\n    displayErrorMessage('An error occurred while fetching data. Please try again.');\n  }\n}\n\nfunction showLoadingIndicator() {\n  const loadingIndicator = document.querySelector('.loading-indicator');\n  if (!loadingIndicator) {\n    const newLoadingIndicator = document.createElement('div');\n    newLoadingIndicator.className = 'loading-indicator';\n    newLoadingIndicator.innerText = 'Loading...';\n    document.body.appendChild(newLoadingIndicator);\n  }\n}\n\nfunction hideLoadingIndicator() {\n  const loadingIndicator = document.querySelector('.loading-indicator');\n  if (loadingIndicator) {\n    loadingIndicator.remove();\n  }\n}\n\nfunction clearGallery() {\n  while (gallery.firstChild) {\n    gallery.removeChild(gallery.firstChild);\n  }\n}\n\n\nfunction displayNoResultsMessage() {\n  const toastContainer = document.createElement('div');\n  toastContainer.className = 'toast-container';\n  const decorativeIcon = document.createElement('span');\n  decorativeIcon.className = 'decorative-icon';\n  decorativeIcon.innerHTML = '&#9737;';\n  const errorMessage = document.createElement('p');\n  errorMessage.innerText = 'Sorry, there are no images matching your search query. Please, try again!';\n  const closeButton = document.createElement('span');\n  closeButton.className = 'close-button';\n  closeButton.innerHTML = '&times;';\n  toastContainer.appendChild(decorativeIcon);\n  toastContainer.appendChild(errorMessage);\n  toastContainer.appendChild(closeButton);\n  document.body.appendChild(toastContainer);\n  closeButton.addEventListener('click', () => {\n    toastContainer.remove();\n  });\n\n  hideLoadMoreButton(); // Hide the \"Load more\" button when there are no results\n}\n\nfunction displayImages(images) {\n  const fragment = document.createDocumentFragment();\n  images.forEach(image => {\n    const linkElement = document.createElement('a');\n    linkElement.href = image.webformatURL;\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n    linkElement.style.width = 'calc((100% - 32px) / 3)';\n    linkElement.style.height = 'auto';\n    imgElement.style.width = '100%';\n    imgElement.style.height = '100%';\n    linkElement.style.marginBottom = '16px';\n    linkElement.style.display = 'block';\n    linkElement.appendChild(imgElement);\n    fragment.appendChild(linkElement);\n  });\n\n  gallery.appendChild(fragment);\n\n  if (lightbox) {\n    lightbox.refresh(); // Оновлення екземпляру SimpleLightbox після додавання нових зображень\n  }\n}\n\nfunction showLoadMoreButton() {\n  loadMoreButton.style.display = 'block';\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreButton.style.display = 'none';\n}\n\ngallery.addEventListener('click', function (event) {\n  if (event.target.tagName === 'IMG' && lightbox) {\n    lightbox.open({ elements: [event.target] });\n  }\n});\n\n// Additional styling for gallery images and links\nconst galleryImages = document.querySelectorAll('.gallery img');\ngalleryImages.forEach(image => {\n  image.style.width = 'calc((100% - 32px) / 3)';\n  image.style.height = 'auto';\n  image.style.marginBottom = '16px';\n});\n\nconst galleryLinks = document.querySelectorAll('.gallery a');\ngalleryLinks.forEach(link => {\n  link.style.width = 'calc((100% - 32px) / 3)';\n  link.style.height = 'auto';\n  link.style.marginBottom = '16px';\n});\n"],"names":["lightbox","currentPage","apiKey","searchForm","searchInput","gallery","loadMoreButton","event","searchQuery","fetchData","SimpleLightbox","url","showLoadingIndicator","data","response","hideLoadingIndicator","displayNoResultsMessage","displayImages","showLoadMoreButton","error","newLoadingIndicator","loadingIndicator","toastContainer","decorativeIcon","errorMessage","closeButton","hideLoadMoreButton","images","fragment","image","linkElement","imgElement","galleryImages","galleryLinks","link"],"mappings":"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"}