{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet totalHits = 0;\nconst apiKey = '41856148-e541297002e84807a45dae6d1';\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nconst loadMoreButtonContainer = document.getElementById('load-more-button-container');\nconst loadMoreButton = document.getElementById('load-more-button');\nlet currentPage = 1;\nlet lightboxInstance;\n\nloadMoreButtonContainer.style.display = 'none';\n\nsearchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const searchQuery = searchInput.value.trim();\n  fetchData(searchQuery, apiKey);\n});\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  lightboxInstance = new SimpleLightbox('.gallery a', {});\n});\n\nloadMoreButton.addEventListener('click', () => {\n  loadMoreImages();\n});\n\nasync function fetchData(searchQuery, apiKey, page = 1) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`;\n\n  try {\n    showLoadingIndicator();\n    const response = await axios.get(url);\n    const data = response.data;\n\n    hideLoadingIndicator();\n\n    if (data.hits.length === 0) {\n      displayNoResultsMessage();\n      return;\n    }\n\n    displayImages(data.hits);\n\n    totalHits = data.totalHits || 0;\n    const perPage = 40;\n\n    if (currentPage * perPage >= totalHits) {\n      loadMoreButtonContainer.style.display = 'none';\n    } else {\n      loadMoreButtonContainer.style.display = 'flex';\n    }\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    hideLoadingIndicator();\n  }\n}\n\nfunction showLoadingIndicator() {\n  const loadingIndicator = document.createElement('div');\n  loadingIndicator.className = 'loading-indicator';\n  loadingIndicator.innerText = 'Loading...';\n  document.body.appendChild(loadingIndicator);\n}\n\nfunction hideLoadingIndicator() {\n  const loadingIndicator = document.querySelector('.loading-indicator');\n  if (loadingIndicator) {\n    loadingIndicator.remove();\n  }\n}\n\nfunction displayNoResultsMessage() {\n  const toastContainer = document.createElement('div');\n  toastContainer.className = 'toast-container';\n  const decorativeIcon = document.createElement('span');\n  decorativeIcon.className = 'decorative-icon';\n  decorativeIcon.innerHTML = '&#9737;';\n  const errorMessage = document.createElement('p');\n  errorMessage.innerText =\n    'Sorry, there are no images matching your search query. Please, try again!';\n  const closeButton = document.createElement('span');\n  closeButton.className = 'close-button';\n  closeButton.innerHTML = '&times;';\n  toastContainer.appendChild(decorativeIcon);\n  toastContainer.appendChild(errorMessage);\n  toastContainer.appendChild(closeButton);\n  document.body.appendChild(toastContainer);\n  closeButton.addEventListener('click', () => {\n    toastContainer.remove();\n  });\n}\n\nfunction displayImages(images) {\n  const fragment = document.createDocumentFragment();\n  images.forEach((image) => {\n    const linkElement = document.createElement('a');\n    linkElement.href = image.webformatURL;\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n    linkElement.style.width = 'calc((100% - 32px) / 3)';\n    linkElement.style.height = 'auto';\n    imgElement.style.width = '100%';\n    imgElement.style.height = '100%';\n    linkElement.style.marginBottom = '16px';\n    linkElement.style.display = 'block';\n    linkElement.appendChild(imgElement);\n    fragment.appendChild(linkElement);\n  });\n  gallery.appendChild(fragment);\n\n  // Додавання кнопки \"Завантажити ще\" після зображень\n  const loadMoreButton = document.createElement('button');\n  loadMoreButton.textContent = 'Load more';\n  loadMoreButton.id = 'load-more-button';\n  loadMoreButton.addEventListener('click', loadMoreImages);\n  loadMoreButtonContainer.appendChild(loadMoreButton);\n\n  // Оновлення lightbox\n  if (lightboxInstance) {\n    lightboxInstance.refresh();\n  }\n\n  // Перевірка, чи відображати кнопку \"Завантажити ще\"\n  const perPage = 40;\n  if (currentPage * perPage >= totalHits) {\n    loadMoreButtonContainer.style.display = 'none';\n  } else {\n    loadMoreButtonContainer.style.display = 'flex';\n  }\n}\n\nasync function loadMoreImages() {\n  currentPage++;\n  const searchQuery = searchInput.value.trim();\n  await fetchData(searchQuery, apiKey, currentPage);\n  const perPage = 40;\n  console.log('Current Page:', currentPage);\n  console.log('Total Hits:', totalHits);\n  console.log('Condition:', currentPage * perPage >= totalHits);\n\n  if (currentPage * perPage >= totalHits) {\n    loadMoreButtonContainer.style.display = 'none';\n    console.log('Button should be hidden.');\n  } else {\n    loadMoreButtonContainer.style.display = 'flex';\n    console.log('Button should be visible.');\n  }\n\n  const cardHeight = gallery.firstElementChild.clientHeight;\n  window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}\n\nlightboxInstance = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["totalHits","apiKey","searchForm","searchInput","gallery","loadMoreButtonContainer","loadMoreButton","currentPage","lightboxInstance","event","searchQuery","fetchData","SimpleLightbox","loadMoreImages","page","url","showLoadingIndicator","data","axios","hideLoadingIndicator","displayNoResultsMessage","displayImages","error","loadingIndicator","toastContainer","decorativeIcon","errorMessage","closeButton","images","fragment","image","linkElement","imgElement","perPage","cardHeight"],"mappings":"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"}