{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nlet lightbox;\nlet currentPage = 1;\nconst apiKey = '41856148-e541297002e84807a45dae6d1';\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nconst loadMoreButton = document.getElementById('load-more-button');\nsearchForm.addEventListener('submit', function (event) {\n    event.preventDefault();\n    const searchQuery = searchInput.value.trim();\n    clearGallery();\n    currentPage = 1;\n    fetchData(searchQuery, apiKey);\n});\nloadMoreButton.addEventListener('click', function () {\n    currentPage++;\n    const searchQuery = searchInput.value.trim();\n    fetchData(searchQuery, apiKey);\n});\ndocument.addEventListener('DOMContentLoaded', function () {\n    initializeLightbox();\n});\ngallery.addEventListener('click', function (event) {\n    if (event.target.tagName === 'IMG' && lightbox) {\n        openLightboxWithClickedImage(event.target);\n    }\n});\ngallery.addEventListener('mouseenter', function (event) {\n    if (event.target.tagName === 'IMG') {\n        event.target.style.transform = 'scale(1.1)';\n        document.body.style.cursor = 'pointer';\n    }\n});\ngallery.addEventListener('mouseleave', function (event) {\n    if (event.target.tagName === 'IMG') {\n        event.target.style.transform = 'scale(1)';\n        document.body.style.cursor = 'auto';\n    }\n});\nfunction initializeLightbox() {\n    lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        widthRatio: 0.9,\n        heightRatio: 0.9,\n        scaleImageToRatio: true,\n    });\n    document.addEventListener('keydown', function (event) {\n        if (event.key === 'Escape' && lightbox && lightbox.visible) {\n            lightbox.close();\n        }\n    });\n}\nfunction openLightboxWithClickedImage(clickedImage) {\n    const galleryImages = document.querySelectorAll('.gallery img');\n    const elements = Array.from(galleryImages).map(img => ({\n        src: img.src,\n        title: img.alt,\n    }));\n    const clickedImageIndex = Array.from(galleryImages).indexOf(clickedImage);\n    lightbox.open({\n        elements,\n        startIndex: clickedImageIndex,\n    });\n}\nasync function fetchData(searchQuery, apiKey) {\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=40`;\n    showLoadingIndicator();\n    try {\n        const response = await axios.get(url);\n        const data = response.data;\n        hideLoadingIndicator();\n        if (data.hits.length === 0) {\n            displayNoResultsMessage();\n        } else {\n            displayImages(data.hits);\n            showLoadMoreButton();\n        }\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        hideLoadingIndicator();\n        displayErrorMessage('An error occurred while fetching data. Please try again.');\n    }\n}\nfunction showLoadingIndicator() {\n    const loadingIndicator = document.querySelector('.loading-indicator');\n    if (!loadingIndicator) {\n        const newLoadingIndicator = document.createElement('div');\n        newLoadingIndicator.className = 'loading-indicator';\n        newLoadingIndicator.innerText = 'Loading...';\n        document.body.appendChild(newLoadingIndicator);\n    }\n}\nfunction hideLoadingIndicator() {\n    const loadingIndicator = document.querySelector('.loading-indicator');\n    if (loadingIndicator) {\n        loadingIndicator.remove();\n    }\n}\nfunction clearGallery() {\n    while (gallery.firstChild) {\n        gallery.removeChild(gallery.firstChild);\n    }\n}\nfunction displayNoResultsMessage() {\n    const toastContainer = document.createElement('div');\n    toastContainer.className = 'toast-container';\n    const decorativeIcon = document.createElement('span');\n    decorativeIcon.className = 'decorative-icon';\n    decorativeIcon.innerHTML = '&#9737;';\n    const errorMessage = document.createElement('p');\n    errorMessage.innerText = 'Sorry, there are no images matching your search query. Please, try again!';\n    const closeButton = document.createElement('span');\n    closeButton.className = 'close-button';\n    closeButton.innerHTML = '&times;';\n    toastContainer.appendChild(decorativeIcon);\n    toastContainer.appendChild(errorMessage);\n    toastContainer.appendChild(closeButton);\n    document.body.appendChild(toastContainer);\n    closeButton.addEventListener('click', () => {\n        toastContainer.remove();\n    });\n    hideLoadMoreButton();\n}\nfunction displayErrorMessage(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight',\n        timeout: 5000,\n    });\n    hideLoadMoreButton();\n}\nfunction displayImages(images) {\n    const fragment = document.createDocumentFragment();\n    images.forEach(image => {\n        const linkElement = document.createElement('a');\n        linkElement.href = image.webformatURL;\n        const imgElement = document.createElement('img');\n        imgElement.src = image.webformatURL;\n        imgElement.alt = image.tags;\n        linkElement.style.width = 'calc((100% - 32px) / 3)';\n        linkElement.style.height = 'auto';\n        imgElement.style.width = '100%';\n        imgElement.style.height = '100%';\n        linkElement.style.marginBottom = '16px';\n        linkElement.style.display = 'block';\n        linkElement.appendChild(imgElement);\n        fragment.appendChild(linkElement);\n    });\n    gallery.appendChild(fragment);\n    if (lightbox) {\n        lightbox.refresh();\n    }\n}\nfunction showLoadMoreButton() {\n    loadMoreButton.style.display = 'block';\n}\nfunction hideLoadMoreButton() {\n    loadMoreButton.style.display = 'none';\n}\nconst galleryImages = document.querySelectorAll('.gallery img');\ngalleryImages.forEach(image => {\n    image.style.width = 'calc((100% - 32px) / 3)';\n    image.style.height = 'auto';\n    image.style.marginBottom = '16px';\n});\nconst galleryLinks = document.querySelectorAll('.gallery a');\ngalleryLinks.forEach(link => {\n    link.style.width = 'calc((100% - 32px) / 3)';\n    link.style.height = 'auto';\n    link.style.marginBottom = '16px';\n});"],"names":["lightbox","currentPage","apiKey","searchForm","searchInput","gallery","loadMoreButton","event","searchQuery","clearGallery","fetchData","initializeLightbox","openLightboxWithClickedImage","SimpleLightbox","clickedImage","galleryImages","elements","img","clickedImageIndex","url","showLoadingIndicator","data","axios","hideLoadingIndicator","displayNoResultsMessage","displayImages","showLoadMoreButton","error","displayErrorMessage","newLoadingIndicator","loadingIndicator","toastContainer","decorativeIcon","errorMessage","closeButton","hideLoadMoreButton","message","iziToast","images","fragment","image","linkElement","imgElement","galleryLinks","link"],"mappings":"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"}