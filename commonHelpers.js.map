{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nlet totalHits = 0;\nconst apiKey = '41856148-e541297002e84807a45dae6d1';\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nconst loadMoreButtonContainer = document.getElementById('load-more-button-container');\nconst loadMoreButton = document.getElementById('load-more-button');\nlet currentPage = 1;\nloadMoreButtonContainer.style.display = 'none';\nsearchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const searchQuery = searchInput.value.trim();\n  fetchData(searchQuery, apiKey);\n});\ndocument.addEventListener('DOMContentLoaded', function () {\n  lightbox = new SimpleLightbox('.gallery a', {});\n});\nloadMoreButton.addEventListener('click', () => {\n  loadMoreImages();\n});\nfunction fetchData(searchQuery, apiKey, page = 1) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`;\n  try {\n    showLoadingIndicator();\n    axios.get(url)\n    .then(response => {\n      const data = response.data;\n      hideLoadingIndicator();\n      if (data.hits.length === 0) {\n        displayNoResultsMessage();\n        return;\n      }\n      displayImages(data.hits);\n      loadMoreButtonContainer.style.display = 'flex';\n      totalHits = data.totalHits || 0;\n      const perPage = 40;\n      if (currentPage * perPage >= totalHits) {\n        loadMoreButtonContainer.style.display = 'none';\n      } else {\n        loadMoreButtonContainer.style.display = 'flex';\n      }\n    })\n    .catch(error => {\n      console.error('Error fetching data:', error);\n      hideLoadingIndicator();\n    });\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    hideLoadingIndicator();\n  }\n}\nfunction showLoadingIndicator() {\n  const loadingIndicator = document.createElement('div');\n  loadingIndicator.className = 'loading-indicator';\n  loadingIndicator.innerText = 'Loading...';\n  document.body.appendChild(loadingIndicator);\n}\nfunction hideLoadingIndicator() {\n  const loadingIndicator = document.querySelector('.loading-indicator');\n  if (loadingIndicator) {\n    loadingIndicator.remove();\n  }\n}\nfunction displayNoResultsMessage() {\n  const toastContainer = document.createElement('div');\n  toastContainer.className = 'toast-container';\n  const decorativeIcon = document.createElement('span');\n  decorativeIcon.className = 'decorative-icon';\n  decorativeIcon.innerHTML = '&#9737;';\n  const errorMessage = document.createElement('p');\n  errorMessage.innerText =\n    'Sorry, there are no images matching your search query. Please, try again!';\n  const closeButton = document.createElement('span');\n  closeButton.className = 'close-button';\n  closeButton.innerHTML = '&times;';\n  toastContainer.appendChild(decorativeIcon);\n  toastContainer.appendChild(errorMessage);\n  toastContainer.appendChild(closeButton);\n  document.body.appendChild(toastContainer);\n  closeButton.addEventListener('click', () => {\n    toastContainer.remove();\n  });\n}\nfunction displayImages(images) {\n  const fragment = document.createDocumentFragment();\n  images.forEach((image) => {\n    const linkElement = document.createElement('a');\n    linkElement.href = image.webformatURL;\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n    linkElement.style.width = 'calc((100% - 32px) / 3)';\n    linkElement.style.height = 'auto';\n    imgElement.style.width = '100%';\n    imgElement.style.height = '100%';\n    linkElement.style.marginBottom = '16px';\n    linkElement.style.display = 'block';\n    linkElement.appendChild(imgElement);\n    fragment.appendChild(linkElement);\n  });\n  gallery.appendChild(fragment);\n  if (lightbox) {\n    lightbox.refresh();\n  }\n}\nasync function loadMoreImages() {\n  currentPage++;\n  const searchQuery = searchInput.value.trim();\n  await fetchData(searchQuery, apiKey, currentPage);\n  const perPage = 40;\n  console.log('Current Page:', currentPage);\n  console.log('Total Hits:', totalHits);\n  console.log('Condition:', currentPage * perPage >= totalHits);\n  if (currentPage * perPage >= totalHits) {\n    loadMoreButtonContainer.style.display = 'none';\n    console.log('Button should be hidden.');\n  } else {\n    loadMoreButtonContainer.style.display = 'flex';\n    console.log('Button should be visible.');\n  }\n  const cardHeight = gallery.firstElementChild.clientHeight;\n  window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});"],"names":["totalHits","apiKey","searchForm","searchInput","gallery","loadMoreButtonContainer","loadMoreButton","currentPage","event","searchQuery","fetchData","lightbox","SimpleLightbox","loadMoreImages","page","url","showLoadingIndicator","axios","response","data","hideLoadingIndicator","displayNoResultsMessage","displayImages","error","loadingIndicator","toastContainer","decorativeIcon","errorMessage","closeButton","images","fragment","image","linkElement","imgElement","perPage","cardHeight"],"mappings":"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"}